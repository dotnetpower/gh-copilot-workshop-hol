"use strict";(globalThis.webpackChunkdocusaurus_site=globalThis.webpackChunkdocusaurus_site||[]).push([[314],{8453:(n,e,r)=>{r.d(e,{R:()=>a,x:()=>o});var s=r(6540);const t={},i=s.createContext(t);function a(n){const e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:a(n.components),s.createElement(i.Provider,{value:e},n.children)}},9037:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"steps/code-refactoring-deep","title":"\ucf54\ub4dc \ub9ac\ud329\ud1a0\ub9c1 \uc2ec\ud654","description":"GitHub Copilot\uc744 \ud65c\uc6a9\ud55c \ub300\uaddc\ubaa8 \ub808\uac70\uc2dc \ucf54\ub4dc\ubca0\uc774\uc2a4 \ud604\ub300\ud654 \ubc0f \uace0\uae09 \ub9ac\ud329\ud1a0\ub9c1 \uae30\ubc95","source":"@site/docs/steps/14-code-refactoring-deep.md","sourceDirName":"steps","slug":"/steps/code-refactoring-deep","permalink":"/gh-copilot-workshop-hol/docs/steps/code-refactoring-deep","draft":false,"unlisted":false,"editUrl":"https://github.com/dotnetpower/gh-copilot-workshop-hol/tree/main/docusaurus-site/docs/steps/14-code-refactoring-deep.md","tags":[],"version":"current","sidebarPosition":14,"frontMatter":{"sidebar_position":14,"title":"\ucf54\ub4dc \ub9ac\ud329\ud1a0\ub9c1 \uc2ec\ud654","description":"GitHub Copilot\uc744 \ud65c\uc6a9\ud55c \ub300\uaddc\ubaa8 \ub808\uac70\uc2dc \ucf54\ub4dc\ubca0\uc774\uc2a4 \ud604\ub300\ud654 \ubc0f \uace0\uae09 \ub9ac\ud329\ud1a0\ub9c1 \uae30\ubc95"},"sidebar":"tutorialSidebar","previous":{"title":"Vibe \ucf54\ub529 \uc2e4\uc804","permalink":"/gh-copilot-workshop-hol/docs/steps/vibe-coding"},"next":{"title":"CI/CD \uc790\ub3d9\ud654","permalink":"/gh-copilot-workshop-hol/docs/steps/cicd-automation"}}');var t=r(4848),i=r(8453);const a={sidebar_position:14,title:"\ucf54\ub4dc \ub9ac\ud329\ud1a0\ub9c1 \uc2ec\ud654",description:"GitHub Copilot\uc744 \ud65c\uc6a9\ud55c \ub300\uaddc\ubaa8 \ub808\uac70\uc2dc \ucf54\ub4dc\ubca0\uc774\uc2a4 \ud604\ub300\ud654 \ubc0f \uace0\uae09 \ub9ac\ud329\ud1a0\ub9c1 \uae30\ubc95"},o="\ucf54\ub4dc \ub9ac\ud329\ud1a0\ub9c1 \uc2ec\ud654",c={},d=[{value:"\uac1c\uc694",id:"\uac1c\uc694",level:2},{value:"\ub300\uaddc\ubaa8 \ub9ac\ud329\ud1a0\ub9c1 \uc804\ub7b5",id:"\ub300\uaddc\ubaa8-\ub9ac\ud329\ud1a0\ub9c1-\uc804\ub7b5",level:2},{value:"1. \uc810\uc9c4\uc801 \ub9ac\ud329\ud1a0\ub9c1",id:"1-\uc810\uc9c4\uc801-\ub9ac\ud329\ud1a0\ub9c1",level:3},{value:"2. \ub808\uac70\uc2dc \ucf54\ub4dc \uc774\ud574\ud558\uae30",id:"2-\ub808\uac70\uc2dc-\ucf54\ub4dc-\uc774\ud574\ud558\uae30",level:3},{value:"3. \uc790\ub3d9\ud654\ub41c \ub9ac\ud329\ud1a0\ub9c1",id:"3-\uc790\ub3d9\ud654\ub41c-\ub9ac\ud329\ud1a0\ub9c1",level:3},{value:"\ud328\ud134 \uae30\ubc18 \ub9ac\ud329\ud1a0\ub9c1",id:"\ud328\ud134-\uae30\ubc18-\ub9ac\ud329\ud1a0\ub9c1",level:2},{value:"1. \uc2f1\uae00\ud1a4 \u2192 \uc758\uc874\uc131 \uc8fc\uc785",id:"1-\uc2f1\uae00\ud1a4--\uc758\uc874\uc131-\uc8fc\uc785",level:3},{value:"2. \ucf5c\ubc31 \uc9c0\uc625 \u2192 async/await",id:"2-\ucf5c\ubc31-\uc9c0\uc625--asyncawait",level:3},{value:"\ub808\uac70\uc2dc \ucf54\ub4dc \ud604\ub300\ud654",id:"\ub808\uac70\uc2dc-\ucf54\ub4dc-\ud604\ub300\ud654",level:2},{value:"C# \ub808\uac70\uc2dc \u2192 \ud604\ub300 C# \ubcc0\ud658",id:"c-\ub808\uac70\uc2dc--\ud604\ub300-c-\ubcc0\ud658",level:3},{value:"Python 2 \u2192 Python 3 \ud604\ub300\ud654",id:"python-2--python-3-\ud604\ub300\ud654",level:3},{value:"\uc131\ub2a5 \ub9ac\ud329\ud1a0\ub9c1",id:"\uc131\ub2a5-\ub9ac\ud329\ud1a0\ub9c1",level:2},{value:"N+1 \ucffc\ub9ac \ubb38\uc81c \ud574\uacb0",id:"n1-\ucffc\ub9ac-\ubb38\uc81c-\ud574\uacb0",level:3},{value:"\ub9ac\ud329\ud1a0\ub9c1 \uccb4\ud06c\ub9ac\uc2a4\ud2b8",id:"\ub9ac\ud329\ud1a0\ub9c1-\uccb4\ud06c\ub9ac\uc2a4\ud2b8",level:2},{value:"Before \ub9ac\ud329\ud1a0\ub9c1",id:"before-\ub9ac\ud329\ud1a0\ub9c1",level:3},{value:"During \ub9ac\ud329\ud1a0\ub9c1",id:"during-\ub9ac\ud329\ud1a0\ub9c1",level:3},{value:"After \ub9ac\ud329\ud1a0\ub9c1",id:"after-\ub9ac\ud329\ud1a0\ub9c1",level:3},{value:"\ub2e4\uc74c \ub2e8\uacc4",id:"\ub2e4\uc74c-\ub2e8\uacc4",level:2}];function l(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"\ucf54\ub4dc-\ub9ac\ud329\ud1a0\ub9c1-\uc2ec\ud654",children:"\ucf54\ub4dc \ub9ac\ud329\ud1a0\ub9c1 \uc2ec\ud654"})}),"\n",(0,t.jsx)(e.h2,{id:"\uac1c\uc694",children:"\uac1c\uc694"}),"\n",(0,t.jsx)(e.p,{children:"GitHub Copilot\uc744 \ud65c\uc6a9\ud558\uc5ec \ub300\uaddc\ubaa8 \ub808\uac70\uc2dc \ucf54\ub4dc\ubca0\uc774\uc2a4\ub97c \ud604\ub300\uc801\uc774\uace0 \uc720\uc9c0\ubcf4\uc218 \uac00\ub2a5\ud55c \ucf54\ub4dc\ub85c \ubcc0\ud658\ud558\ub294 \uace0\uae09 \ub9ac\ud329\ud1a0\ub9c1 \uae30\ubc95\uc744 \ud559\uc2b5\ud569\ub2c8\ub2e4."}),"\n",(0,t.jsx)(e.h2,{id:"\ub300\uaddc\ubaa8-\ub9ac\ud329\ud1a0\ub9c1-\uc804\ub7b5",children:"\ub300\uaddc\ubaa8 \ub9ac\ud329\ud1a0\ub9c1 \uc804\ub7b5"}),"\n",(0,t.jsx)(e.h3,{id:"1-\uc810\uc9c4\uc801-\ub9ac\ud329\ud1a0\ub9c1",children:"1. \uc810\uc9c4\uc801 \ub9ac\ud329\ud1a0\ub9c1"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Strangler Fig \ud328\ud134"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:'// Legacy Code\nclass LegacyOrderService {\n  processOrder(orderId: string) {\n    // 1000\uc904\uc758 \uc2a4\ud30c\uac8c\ud2f0 \ucf54\ub4dc\n    const order = this.db.query(`SELECT * FROM orders WHERE id = ${orderId}`);\n    // ... \ubcf5\uc7a1\ud55c \ub85c\uc9c1\n  }\n}\n\n// Step 1: \uc0c8\ub85c\uc6b4 \uc11c\ube44\uc2a4 \uc778\ud130\ud398\uc774\uc2a4 \uc0dd\uc131\n// Copilot Chat: "\uc774 \ub808\uac70\uc2dc \uc11c\ube44\uc2a4\ub97c \uc704\ud55c \ud604\ub300\uc801\uc778 \uc778\ud130\ud398\uc774\uc2a4 \uc124\uacc4\ud574\uc918"\n\ninterface OrderService {\n  getOrder(orderId: string): Promise<Order>;\n  processOrder(order: Order): Promise<ProcessedOrder>;\n  validateOrder(order: Order): ValidationResult;\n  calculateTotal(order: Order): number;\n}\n\n// Step 2: \uc5b4\ub311\ud130 \ud328\ud134\uc73c\ub85c \uc810\uc9c4\uc801 \uc774\uc804\nclass OrderServiceAdapter implements OrderService {\n  constructor(\n    private legacyService: LegacyOrderService,\n    private modernService: ModernOrderService\n  ) {}\n  \n  async getOrder(orderId: string): Promise<Order> {\n    // Feature flag\ub85c \uc810\uc9c4\uc801 \uc804\ud658\n    if (this.isModernEnabled(orderId)) {\n      return this.modernService.getOrder(orderId);\n    }\n    return this.legacyService.getOrder(orderId);\n  }\n  \n  private isModernEnabled(orderId: string): boolean {\n    // 10% \ud2b8\ub798\ud53d\ub9cc \uc0c8 \uc11c\ube44\uc2a4\ub85c\n    return this.hashOrderId(orderId) % 10 === 0;\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"2-\ub808\uac70\uc2dc-\ucf54\ub4dc-\uc774\ud574\ud558\uae30",children:"2. \ub808\uac70\uc2dc \ucf54\ub4dc \uc774\ud574\ud558\uae30"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Copilot\uc744 \ud65c\uc6a9\ud55c \ucf54\ub4dc \ubd84\uc11d"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"# Legacy Python Code (\uc774\ud574\ud558\uae30 \uc5b4\ub824\uc6b4 \ucf54\ub4dc)\ndef calc(d, p, t):\n    if t == 'A':\n        r = d * (1 + p * 0.01)\n    elif t == 'B':\n        r = d * (1 + p * 0.01) * 0.95\n    elif t == 'C':\n        r = d * (1 + p * 0.01) * 0.9\n    else:\n        r = d\n    return r if r > 0 else 0\n\n# Copilot Chat\uc5d0 \uc9c8\ubb38:\n# \"@workspace \uc774 \ud568\uc218\uac00 \ubb34\uc5c7\uc744 \ud558\ub294\uc9c0 \uc124\uba85\ud574\uc918. \n#  \uadf8\ub9ac\uace0 \ub354 \uba85\ud655\ud55c \uc774\ub984\uacfc \uad6c\uc870\ub85c \ub9ac\ud329\ud1a0\ub9c1\ud574\uc918\"\n\n# Copilot\uc758 \uac1c\uc120\ub41c \ubc84\uc804\nfrom enum import Enum\nfrom typing import Union\n\nclass CustomerTier(Enum):\n    \"\"\"\uace0\uac1d \ub4f1\uae09\"\"\"\n    PREMIUM = 'A'  # \ud560\uc778 \uc5c6\uc74c\n    STANDARD = 'B'  # 5% \ud560\uc778\n    BASIC = 'C'     # 10% \ud560\uc778\n    NONE = 'D'      # \ud3ec\uc778\ud2b8 \ubbf8\uc801\uc6a9\n\ndef calculate_final_price(\n    base_price: float,\n    points_percentage: float,\n    customer_tier: Union[CustomerTier, str]\n) -> float:\n    \"\"\"\n    \uace0\uac1d \ub4f1\uae09\uacfc \ud3ec\uc778\ud2b8\ub97c \uace0\ub824\ud55c \ucd5c\uc885 \uac00\uaca9\uc744 \uacc4\uc0b0\ud569\ub2c8\ub2e4.\n    \n    Args:\n        base_price: \uae30\ubcf8 \uac00\uaca9\n        points_percentage: \uc801\uc6a9\ud560 \ud3ec\uc778\ud2b8 \ube44\uc728 (\uc608: 5 = 5%)\n        customer_tier: \uace0\uac1d \ub4f1\uae09 (A: \ud504\ub9ac\ubbf8\uc5c4, B: \uc2a4\ud0e0\ub2e4\ub4dc, C: \ubca0\uc774\uc9c1)\n    \n    Returns:\n        \ucd5c\uc885 \uac00\uaca9 (0 \uc774\uc0c1)\n    \n    Examples:\n        >>> calculate_final_price(100, 10, CustomerTier.PREMIUM)\n        110.0\n        >>> calculate_final_price(100, 10, CustomerTier.STANDARD)\n        104.5\n    \"\"\"\n    # \ud3ec\uc778\ud2b8 \uc801\uc6a9 \uac00\uaca9\n    price_with_points = base_price * (1 + points_percentage * 0.01)\n    \n    # \ub4f1\uae09\ubcc4 \ud560\uc778\uc728\n    tier_discounts = {\n        'A': 0.0,   # \ud560\uc778 \uc5c6\uc74c\n        'B': 0.05,  # 5% \ud560\uc778\n        'C': 0.10,  # 10% \ud560\uc778\n    }\n    \n    tier_value = customer_tier.value if isinstance(customer_tier, CustomerTier) else customer_tier\n    discount = tier_discounts.get(tier_value, 0.0)\n    \n    # \ud560\uc778 \uc801\uc6a9\n    final_price = price_with_points * (1 - discount)\n    \n    # \uc74c\uc218 \ubc29\uc9c0\n    return max(final_price, 0.0)\n"})}),"\n",(0,t.jsx)(e.h3,{id:"3-\uc790\ub3d9\ud654\ub41c-\ub9ac\ud329\ud1a0\ub9c1",children:"3. \uc790\ub3d9\ud654\ub41c \ub9ac\ud329\ud1a0\ub9c1"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"Extract Method"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"// Before: \uae34 \ud568\uc218\nfunction processUserRegistration(userData) {\n  // \uc785\ub825 \uac80\uc99d (20\uc904)\n  if (!userData.email || !userData.email.includes('@')) {\n    throw new Error('Invalid email');\n  }\n  if (!userData.password || userData.password.length < 8) {\n    throw new Error('Password too short');\n  }\n  // ... \ub354 \ub9ce\uc740 \uac80\uc99d\n  \n  // \ube44\ubc00\ubc88\ud638 \ud574\uc2f1 (10\uc904)\n  const salt = crypto.randomBytes(16);\n  const hash = crypto.pbkdf2Sync(userData.password, salt, 1000, 64, 'sha512');\n  \n  // DB \uc800\uc7a5 (15\uc904)\n  const user = {\n    email: userData.email.toLowerCase(),\n    passwordHash: hash.toString('hex'),\n    passwordSalt: salt.toString('hex'),\n    createdAt: new Date()\n  };\n  db.users.insert(user);\n  \n  // \ud658\uc601 \uc774\uba54\uc77c \ubc1c\uc1a1 (20\uc904)\n  // ...\n  \n  return user;\n}\n\n// Copilot Chat: \"\uc774 \ud568\uc218\ub97c Extract Method \ud328\ud134\uc73c\ub85c \ub9ac\ud329\ud1a0\ub9c1\ud574\uc918\"\n\n// After: \uc791\uc740 \ud568\uc218\ub4e4\ub85c \ubd84\ub9ac\ninterface UserRegistrationData {\n  email: string;\n  password: string;\n  name?: string;\n}\n\ninterface User {\n  id: string;\n  email: string;\n  passwordHash: string;\n  passwordSalt: string;\n  createdAt: Date;\n}\n\nfunction processUserRegistration(userData: UserRegistrationData): User {\n  validateUserData(userData);\n  \n  const hashedPassword = hashPassword(userData.password);\n  const user = createUserRecord(userData, hashedPassword);\n  const savedUser = saveUserToDatabase(user);\n  \n  sendWelcomeEmail(savedUser.email).catch(err => \n    console.error('Failed to send welcome email:', err)\n  );\n  \n  return savedUser;\n}\n\nfunction validateUserData(userData: UserRegistrationData): void {\n  if (!isValidEmail(userData.email)) {\n    throw new Error('Invalid email address');\n  }\n  \n  if (!isValidPassword(userData.password)) {\n    throw new Error('Password must be at least 8 characters');\n  }\n}\n\nfunction hashPassword(password: string): { hash: string; salt: string } {\n  const salt = crypto.randomBytes(16);\n  const hash = crypto.pbkdf2Sync(password, salt, 100000, 64, 'sha512');\n  \n  return {\n    hash: hash.toString('hex'),\n    salt: salt.toString('hex')\n  };\n}\n\n// ... \ub098\uba38\uc9c0 \ud568\uc218\ub4e4\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\ud328\ud134-\uae30\ubc18-\ub9ac\ud329\ud1a0\ub9c1",children:"\ud328\ud134 \uae30\ubc18 \ub9ac\ud329\ud1a0\ub9c1"}),"\n",(0,t.jsx)(e.h3,{id:"1-\uc2f1\uae00\ud1a4--\uc758\uc874\uc131-\uc8fc\uc785",children:"1. \uc2f1\uae00\ud1a4 \u2192 \uc758\uc874\uc131 \uc8fc\uc785"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'// Before: \uc2f1\uae00\ud1a4 \ud328\ud134 (\ud14c\uc2a4\ud2b8 \uc5b4\ub824\uc6c0)\npublic class DatabaseConnection\n{\n    private static DatabaseConnection _instance;\n    private SqlConnection _connection;\n    \n    private DatabaseConnection()\n    {\n        _connection = new SqlConnection(\n            "Server=prod;Database=main;..."\n        );\n    }\n    \n    public static DatabaseConnection Instance\n    {\n        get\n        {\n            if (_instance == null)\n                _instance = new DatabaseConnection();\n            return _instance;\n        }\n    }\n    \n    public void ExecuteQuery(string sql) { /* ... */ }\n}\n\n// \uc0ac\uc6a9 \uc608\npublic class OrderService\n{\n    public void ProcessOrder(int orderId)\n    {\n        DatabaseConnection.Instance.ExecuteQuery($"UPDATE orders SET status = \'processed\' WHERE id = {orderId}");\n    }\n}\n\n// Copilot Chat: "\uc774 \uc2f1\uae00\ud1a4\uc744 \uc758\uc874\uc131 \uc8fc\uc785 \ud328\ud134\uc73c\ub85c \ub9ac\ud329\ud1a0\ub9c1\ud558\uace0,\n//                \ud14c\uc2a4\ud2b8 \uac00\ub2a5\ud558\uac8c \ub9cc\ub4e4\uc5b4\uc918"\n\n// After: \uc758\uc874\uc131 \uc8fc\uc785 (\ud14c\uc2a4\ud2b8 \uc6a9\uc774, \uc720\uc5f0\ud568)\npublic interface IDatabaseConnection\n{\n    Task<int> ExecuteNonQueryAsync(string sql, object parameters = null);\n    Task<T> ExecuteScalarAsync<T>(string sql, object parameters = null);\n    Task<IEnumerable<T>> QueryAsync<T>(string sql, object parameters = null);\n}\n\npublic class SqlDatabaseConnection : IDatabaseConnection\n{\n    private readonly string _connectionString;\n    \n    public SqlDatabaseConnection(IConfiguration configuration)\n    {\n        _connectionString = configuration.GetConnectionString("DefaultConnection");\n    }\n    \n    public async Task<int> ExecuteNonQueryAsync(string sql, object parameters = null)\n    {\n        using var connection = new SqlConnection(_connectionString);\n        return await connection.ExecuteAsync(sql, parameters);\n    }\n    \n    // ... \ub098\uba38\uc9c0 \uba54\uc11c\ub4dc \uad6c\ud604\n}\n\npublic class OrderService\n{\n    private readonly IDatabaseConnection _db;\n    private readonly ILogger<OrderService> _logger;\n    \n    public OrderService(IDatabaseConnection db, ILogger<OrderService> logger)\n    {\n        _db = db ?? throw new ArgumentNullException(nameof(db));\n        _logger = logger ?? throw new ArgumentNullException(nameof(logger));\n    }\n    \n    public async Task ProcessOrderAsync(int orderId)\n    {\n        const string sql = "UPDATE orders SET status = @status WHERE id = @id";\n        await _db.ExecuteNonQueryAsync(sql, new { status = "processed", id = orderId });\n        _logger.LogInformation("Order {OrderId} processed", orderId);\n    }\n}\n\n// DI \ucee8\ud14c\uc774\ub108 \uc124\uc815\nservices.AddScoped<IDatabaseConnection, SqlDatabaseConnection>();\nservices.AddScoped<OrderService>();\n\n// \ud14c\uc2a4\ud2b8\npublic class OrderServiceTests\n{\n    [Fact]\n    public async Task ProcessOrder_UpdatesDatabase()\n    {\n        // Arrange\n        var mockDb = new Mock<IDatabaseConnection>();\n        var mockLogger = new Mock<ILogger<OrderService>>();\n        var service = new OrderService(mockDb.Object, mockLogger.Object);\n        \n        // Act\n        await service.ProcessOrderAsync(123);\n        \n        // Assert\n        mockDb.Verify(db => db.ExecuteNonQueryAsync(\n            It.IsAny<string>(),\n            It.Is<object>(p => /* \uac80\uc99d \ub85c\uc9c1 */)\n        ), Times.Once);\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"2-\ucf5c\ubc31-\uc9c0\uc625--asyncawait",children:"2. \ucf5c\ubc31 \uc9c0\uc625 \u2192 async/await"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-javascript",children:"// Before: \ucf5c\ubc31 \uc9c0\uc625\nfunction getUserOrders(userId, callback) {\n  db.users.findById(userId, function(err, user) {\n    if (err) return callback(err);\n    \n    db.orders.findByUserId(user.id, function(err, orders) {\n      if (err) return callback(err);\n      \n      const orderDetails = [];\n      let processed = 0;\n      \n      orders.forEach(function(order) {\n        db.orderItems.findByOrderId(order.id, function(err, items) {\n          if (err) return callback(err);\n          \n          orderDetails.push({ order, items });\n          processed++;\n          \n          if (processed === orders.length) {\n            callback(null, orderDetails);\n          }\n        });\n      });\n    });\n  });\n}\n\n// Copilot Chat: \"\uc774 \ucf5c\ubc31 \uc9c0\uc625\uc744 async/await\uc73c\ub85c \ub9ac\ud329\ud1a0\ub9c1\ud574\uc918\"\n\n// After: async/await\nasync function getUserOrders(userId: string): Promise<OrderDetails[]> {\n  try {\n    // \uc0ac\uc6a9\uc790 \uc870\ud68c\n    const user = await db.users.findById(userId);\n    if (!user) {\n      throw new Error(`User not found: ${userId}`);\n    }\n    \n    // \uc8fc\ubb38 \ubaa9\ub85d \uc870\ud68c\n    const orders = await db.orders.findByUserId(user.id);\n    \n    // \uc8fc\ubb38 \uc0c1\uc138 \uc815\ubcf4 \ubcd1\ub82c \uc870\ud68c\n    const orderDetails = await Promise.all(\n      orders.map(async (order) => {\n        const items = await db.orderItems.findByOrderId(order.id);\n        return { order, items };\n      })\n    );\n    \n    return orderDetails;\n    \n  } catch (error) {\n    console.error('Failed to get user orders:', error);\n    throw new Error(`Failed to retrieve orders for user ${userId}`);\n  }\n}\n\n// \uc0ac\uc6a9 \uc608\nasync function displayUserOrders(userId: string) {\n  try {\n    const orders = await getUserOrders(userId);\n    console.log(`Found ${orders.length} orders for user ${userId}`);\n    return orders;\n  } catch (error) {\n    console.error('Error displaying orders:', error);\n    return [];\n  }\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\ub808\uac70\uc2dc-\ucf54\ub4dc-\ud604\ub300\ud654",children:"\ub808\uac70\uc2dc \ucf54\ub4dc \ud604\ub300\ud654"}),"\n",(0,t.jsx)(e.h3,{id:"c-\ub808\uac70\uc2dc--\ud604\ub300-c-\ubcc0\ud658",children:"C# \ub808\uac70\uc2dc \u2192 \ud604\ub300 C# \ubcc0\ud658"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csharp",children:'// Before: \ub808\uac70\uc2dc C# \ucf54\ub4dc\npublic class UserService\n{\n    private UserRepository userRepository;\n    \n    public UserService(UserRepository userRepository)\n    {\n        this.userRepository = userRepository;\n    }\n    \n    public User FindUserById(long? id)\n    {\n        if (id == null)\n        {\n            throw new ArgumentException("ID cannot be null");\n        }\n        \n        User user = userRepository.FindById(id.Value);\n        if (user == null)\n        {\n            throw new UserNotFoundException("User not found: " + id);\n        }\n        \n        return user;\n    }\n    \n    public List<User> FindActiveUsers()\n    {\n        List<User> allUsers = userRepository.FindAll();\n        List<User> activeUsers = new List<User>();\n        \n        foreach (User user in allUsers)\n        {\n            if (user.IsActive)\n            {\n                activeUsers.Add(user);\n            }\n        }\n        \n        return activeUsers;\n    }\n}\n\n// Copilot Chat: "\uc774 C# \ucf54\ub4dc\ub97c \ud604\ub300\uc801\uc778 C# 12 \uc2a4\ud0c0\uc77c\ub85c \ubcc0\ud658\ud558\uace0 \n//                nullable \ucc38\uc870 \ud0c0\uc785\uacfc LINQ\ub97c \ud65c\uc6a9\ud558\ub3c4\ub85d \uac1c\uc120\ud574\uc918"\n\n// After: \ud604\ub300 C# 12 \uc2a4\ud0c0\uc77c\n// \ud544\uc694\ud55c using: System.Runtime.CompilerServices (EnumeratorCancellation\uc6a9)\npublic class UserService(IUserRepository userRepository)\n{\n    public User FindUserById(long? id)\n    {\n        ArgumentNullException.ThrowIfNull(id);\n        \n        return userRepository.FindById(id.Value)\n            ?? throw new UserNotFoundException($"User not found: {id}");\n    }\n    \n    public IEnumerable<User> FindActiveUsers() =>\n        userRepository.FindAll()\n            .Where(user => user.IsActive);\n    \n    // \ucd94\uac00 \uac1c\uc120: \ube44\ub3d9\uae30 \ucc98\ub9ac\n    public async Task<User> FindUserByIdAsync(long? id, CancellationToken cancellationToken = default)\n    {\n        ArgumentNullException.ThrowIfNull(id);\n        \n        return await userRepository.FindByIdAsync(id.Value, cancellationToken)\n            ?? throw new UserNotFoundException($"User not found: {id}");\n    }\n    \n    // IAsyncEnumerable\uc744 \uc0ac\uc6a9\ud55c \uc2a4\ud2b8\ub9ac\ubc0d\n    public async IAsyncEnumerable<User> GetActiveUsersAsync(\n        [EnumeratorCancellation] CancellationToken cancellationToken = default)\n    {\n        await foreach (var user in userRepository.GetAllAsync(cancellationToken))\n        {\n            if (user.IsActive)\n            {\n                yield return user;\n            }\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"python-2--python-3-\ud604\ub300\ud654",children:"Python 2 \u2192 Python 3 \ud604\ub300\ud654"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'# Before: Python 2 \uc2a4\ud0c0\uc77c\ndef process_data(data):\n    if not data:\n        raise Exception("No data")\n    \n    result = []\n    for item in data:\n        if item.has_key(\'value\'):\n            result.append(item[\'value\'])\n    \n    return result\n\n# Copilot Chat: "Python 3\ub85c \ud604\ub300\ud654\ud558\uace0 \ud0c0\uc785 \ud78c\ud2b8\uc640 \n#                \ucd5c\uc2e0 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud558\ub3c4\ub85d \uac1c\uc120\ud574\uc918"\n\n# After: Python 3 \ud604\ub300\ud654\nfrom typing import List, Dict, Any, Optional\nfrom dataclasses import dataclass\n\n@dataclass\nclass DataItem:\n    """\ub370\uc774\ud130 \ud56d\ubaa9"""\n    value: float\n    name: str\n    metadata: Optional[Dict[str, Any]] = None\n\ndef process_data(data: List[DataItem]) -> List[float]:\n    """\n    \ub370\uc774\ud130 \ud56d\ubaa9 \ub9ac\uc2a4\ud2b8\uc5d0\uc11c \uac12\uc744 \ucd94\ucd9c\ud569\ub2c8\ub2e4.\n    \n    Args:\n        data: \ucc98\ub9ac\ud560 \ub370\uc774\ud130 \ud56d\ubaa9 \ub9ac\uc2a4\ud2b8\n    \n    Returns:\n        \ucd94\ucd9c\ub41c \uac12\ub4e4\uc758 \ub9ac\uc2a4\ud2b8\n    \n    Raises:\n        ValueError: \ub370\uc774\ud130\uac00 \ube44\uc5b4\uc788\ub294 \uacbd\uc6b0\n    \n    Examples:\n        >>> items = [DataItem(value=1.0, name="a"), DataItem(value=2.0, name="b")]\n        >>> process_data(items)\n        [1.0, 2.0]\n    """\n    if not data:\n        raise ValueError("\ub370\uc774\ud130\uac00 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4")\n    \n    # List comprehension \uc0ac\uc6a9\n    return [item.value for item in data]\n\n# \ub354 \ub098\uc544\uac00: \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d \uc2a4\ud0c0\uc77c\nfrom functools import reduce\nfrom operator import add\n\ndef process_data_functional(data: List[DataItem]) -> float:\n    """\ub370\uc774\ud130 \ud56d\ubaa9\ub4e4\uc758 \uac12\uc744 \ud569\uc0b0\ud569\ub2c8\ub2e4."""\n    if not data:\n        raise ValueError("\ub370\uc774\ud130\uac00 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4")\n    \n    return reduce(add, (item.value for item in data), 0.0)\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\uc131\ub2a5-\ub9ac\ud329\ud1a0\ub9c1",children:"\uc131\ub2a5 \ub9ac\ud329\ud1a0\ub9c1"}),"\n",(0,t.jsx)(e.h3,{id:"n1-\ucffc\ub9ac-\ubb38\uc81c-\ud574\uacb0",children:"N+1 \ucffc\ub9ac \ubb38\uc81c \ud574\uacb0"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"// Before: N+1 \ucffc\ub9ac \ubb38\uc81c\nasync function getBlogPostsWithComments() {\n  const posts = await db.posts.findAll(); // 1\ubc88 \ucffc\ub9ac\n  \n  for (const post of posts) {\n    // N\ubc88 \ucffc\ub9ac (posts \uac1c\uc218\ub9cc\ud07c)\n    post.comments = await db.comments.findByPostId(post.id);\n  }\n  \n  return posts;\n}\n\n// Copilot Chat: \"N+1 \ucffc\ub9ac \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uace0 \uc131\ub2a5\uc744 \ucd5c\uc801\ud654\ud574\uc918\"\n\n// After: JOIN \ub610\ub294 \uc77c\uad04 \ub85c\ub4dc\nasync function getBlogPostsWithComments(): Promise<PostWithComments[]> {\n  // Option 1: SQL JOIN \uc0ac\uc6a9\n  const postsWithComments = await db.query(`\n    SELECT \n      p.*,\n      json_agg(c.*) as comments\n    FROM posts p\n    LEFT JOIN comments c ON c.post_id = p.id\n    GROUP BY p.id\n  `);\n  \n  return postsWithComments;\n}\n\n// Option 2: DataLoader \ud328\ud134\nimport DataLoader from 'dataloader';\n\nconst commentLoader = new DataLoader(async (postIds: string[]) => {\n  const comments = await db.comments.findByPostIds(postIds);\n  \n  // postId\ubcc4\ub85c \uadf8\ub8f9\ud654\n  const commentsByPostId = new Map<string, Comment[]>();\n  for (const comment of comments) {\n    const existing = commentsByPostId.get(comment.postId) || [];\n    existing.push(comment);\n    commentsByPostId.set(comment.postId, existing);\n  }\n  \n  // postIds \uc21c\uc11c\ub300\ub85c \ubc18\ud658\n  return postIds.map(id => commentsByPostId.get(id) || []);\n});\n\nasync function getBlogPostsWithCommentsOptimized() {\n  const posts = await db.posts.findAll();\n  \n  // \uc77c\uad04 \ub85c\ub4dc (1\ubc88\uc758 \ucd94\uac00 \ucffc\ub9ac)\n  const commentsArrays = await Promise.all(\n    posts.map(post => commentLoader.load(post.id))\n  );\n  \n  return posts.map((post, index) => ({\n    ...post,\n    comments: commentsArrays[index]\n  }));\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\ub9ac\ud329\ud1a0\ub9c1-\uccb4\ud06c\ub9ac\uc2a4\ud2b8",children:"\ub9ac\ud329\ud1a0\ub9c1 \uccb4\ud06c\ub9ac\uc2a4\ud2b8"}),"\n",(0,t.jsx)(e.h3,{id:"before-\ub9ac\ud329\ud1a0\ub9c1",children:"Before \ub9ac\ud329\ud1a0\ub9c1"}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\ud604\uc7ac \ucf54\ub4dc\uc758 \ub3d9\uc791\uc744 \uc644\uc804\ud788 \uc774\ud574"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\ud3ec\uad04\uc801\uc778 \ud14c\uc2a4\ud2b8 \uc791\uc131 (\ub9ac\ud329\ud1a0\ub9c1 \uc548\uc804\ub9dd)"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\ub9ac\ud329\ud1a0\ub9c1 \ubaa9\ud45c \uba85\ud655\ud788 \uc815\uc758"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\uc791\uc740 \ub2e8\uc704\ub85c \ub098\ub20c \uc218 \uc788\ub294\uc9c0 \ud655\uc778"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\ubc84\uc804 \uad00\ub9ac \uc2dc\uc2a4\ud15c\uc5d0 \ucee4\ubc0b"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"during-\ub9ac\ud329\ud1a0\ub9c1",children:"During \ub9ac\ud329\ud1a0\ub9c1"}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\ud55c \ubc88\uc5d0 \ud558\ub098\uc758 \ub9ac\ud329\ud1a0\ub9c1\ub9cc \uc218\ud589"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\uac01 \ub2e8\uacc4\ub9c8\ub2e4 \ud14c\uc2a4\ud2b8 \uc2e4\ud589"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\uae30\ub2a5 \ubcc0\uacbd\uacfc \ub9ac\ud329\ud1a0\ub9c1 \ubd84\ub9ac"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\uc790\uc8fc \ucee4\ubc0b"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Copilot \uc81c\uc548\uc744 \uac80\uc99d"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"after-\ub9ac\ud329\ud1a0\ub9c1",children:"After \ub9ac\ud329\ud1a0\ub9c1"}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\ubaa8\ub4e0 \ud14c\uc2a4\ud2b8 \ud1b5\uacfc \ud655\uc778"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\uc131\ub2a5 \uc601\ud5a5 \uce21\uc815"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\ucf54\ub4dc \ub9ac\ubdf0 \uc694\uccad"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\ubb38\uc11c \uc5c5\ub370\uc774\ud2b8"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\ud300\uc6d0\uc5d0\uac8c \ubcc0\uacbd \uc0ac\ud56d \uacf5\uc720"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\ub2e4\uc74c-\ub2e8\uacc4",children:"\ub2e4\uc74c \ub2e8\uacc4"}),"\n",(0,t.jsx)(e.p,{children:"\ub2e4\uc74c \uc139\uc158\uc5d0\uc11c\ub294 CI/CD \uc790\ub3d9\ud654\uc5d0 GitHub Copilot\uc744 \ud65c\uc6a9\ud558\ub294 \ubc29\ubc95\uc744 \ud559\uc2b5\ud569\ub2c8\ub2e4."}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\ucc38\uace0 \uc790\ub8cc"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://refactoring.com/",children:"Refactoring by Martin Fowler"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://www.amazon.com/Working-Effectively-Legacy-Michael-Feathers/dp/0131177052",children:"Working Effectively with Legacy Code"})}),"\n"]})]})}function u(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}}}]);